stages:
  - build

build_and_post:
  stage: build
  image: node:18
  script:
    - start=$(date +%s)
    - npm install
    - npm test
    - end=$(date +%s)
    - build_time=$((end - start))
    - >
      curl -X POST -H "Content-Type: application/json"
      -d "{\"tool\":\"GitLab CI/CD\",\"run\":1,\"buildTime\":$build_time,\"testTime\":$build_time,\"status\":\"Success\"}"
      "https://script.google.com/macros/s/AKfycby_efCAW5NnY-XWtykFy6Tj_E43Aor0odrxTzS5_EjW7T-nFv3ts8yDZOJEhtiOI8SC9g/exec"
